<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<!--<script src="../js/rem_ajax.js" type="text/javascript" charset="utf-8"></script>-->
	</head>
<style>
	*{
		margin:0;
		padding:0;
		position:relative;
	}
	header{
		width:100%;
		height:2.5rem;
		position:absolute;
		top:0;
		left:0;
		background:red;
	}
	section{
		width:100%;
		position:absolute;
		top:2.5rem;
		left:0;
		bottom:2.5rem;
		overflow: auto;
	}
	section>div{
		
	}
	footer{
		width:100%;
		height:2.5rem;
		position:absolute;
		left:0;
		bottom:0;
		background:red;
	}
</style>
	<body>
		<header>头部</header>
		<section>
			<div>
				<div class="category">
					<ul>
						<li id="dd1"><a href="javascript:getProductCategoryHtml(1)">叶菜类</a></li>
						<li id="dd2"><a href="javascript:getProductCategoryHtml(2)">瓜果类</a></li>
						<li id="dd3"><a href="javascript:getProductCategoryHtml(3)">根茎类</a></li>
						<li id="dd4"><a href="javascript:getProductCategoryHtml(4)">菌菇类</a></li>
						<li id="dd5"><a href="javascript:getProductCategoryHtml(5)">肉禽蛋</a></li>
						<li id="dd6"><a href="javascript:getProductCategoryHtml(6)">海　鲜</a></li>
						<li id="dd7"><a href="javascript:getProductCategoryHtml(7)">水　果</a></li>
						<li id="dd8"><a href="javascript:getProductCategoryHtml(8)">豆制品</a></li>
						<li id="dd9"><a href="javascript:getProductCategoryHtml(9)">粮　油</a></li>
						<li id="dd10"><a href="javascript:getProductCategoryHtml(10)">干货汤品</a></li>
						<li id="dd11"><a href="javascript:getProductCategoryHtml(11)">奶制品</a></li>				
					</ul>
				</div>
				<div class="prolist">
					<ul class="ccbg"></ul>
				</div>
			</div>
		</section>
		<footer>底部</footer>
		
<script>
    $(".category li").click(function(){
        $(this).addClass("cur").siblings().removeAttr("class");
    });
    function showLoading() {
        $(".ccbg").css("position", "relative");
        var html = '<div id="loading" style="width:100%;height:100%;background:#fff;filter:alpha(opacity=50);opacity:0.5;text-align:center;position:absolute;left:0px;top:0px;"><div style="width:32px;height:32px;position:fixed;top:50%;left:60%;margin-left:-16px;z-index:1000;"><img src="../img/loading.gif" /></div></div>';
        $(".ccbg").append(html);
    }
    function getProductCategoryHtml(productCategoryId){
        showLoading();
    	$.ax("product/list/"+productCategoryId,null,'GET',null,'text',function(data){
        	$(".ccbg").css("position", "none");
            $("#loading").remove();
            $('.ccbg').html(data);
        },function(data){
        	console.dir(data);
        });    
    }
    function addProduct(productId){
    	$("#reduceProduct_"+productId).css("display","");
    	updateQuantity(productId,1);
    }
    //更新购物车数量
   	function updateQuantity(productId,quantity){
	   $.ax("cart_item/update",
				{"productId":productId,"quantity":quantity,"type":1}, 'POST',null,'json',
				function(data){
					if(data.productQuantity<=0){
						$("#reduceProduct_"+productId).css("display","none");
						$("#productQuantity_"+productId).html("");
						$("#cartQuantity").html(data.quantity);
					}else{
						$("#productQuantity_"+productId).html(data.productQuantity);
    					$("#cartQuantity").html(data.quantity);
					}
				},
				function(data){
	        });
   	}
    function reduceProduct(productId){
    	updateQuantity(productId,-1);
	}
	$(function(){
		getProductCategoryHtml(1);
		$('#dd1').addClass("cur").siblings().removeAttr("class");
		loadCart();
	})
    function fenlei(){
        $(".meunTab li").eq(1).click();
    }
	function loadCart(){
		//ajax
		$.ax("cart/view",null,'GET',null,'json',function(data){
			$("#cartQuantity").text(data.quantity);
        },
            function(data){
        });
	}	
</script>
		
		
		
	</body>
</html>
