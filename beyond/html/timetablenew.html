<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
	/>
	<title>课程表</title>
	 <link rel="stylesheet" href="../css/mui.min.css"/>
	 <link rel="stylesheet" href="../css/base.css"/>
	 <link rel="stylesheet" href="../css/topic.css"/>
	 <link rel="stylesheet" href="../css/Dynamic-hot.css"/>
	 <script src="../js/mui.min.js"></script>
	 <script src="../js/x_rem.js"></script>
	 <script src="../js/base.js"></script>
	 <script src="../js/jquery.js"></script>
	 <script src="../js/vue1026.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
	<script src="../js/vue-resource121.js">
	</script>
	<style>
	
		.Dynamic{
			height: 1.3rem;
		}
		.Dynamic ul{
			height: 1.3rem;
			background-color: #f093a1;
		}
		header em{
			top: 0;
		}
		.timetable_layer .timetable span {
			border-bottom: 3px solid #fff;
		}

		.Dynamic ul li:last-of-type span {
			border-bottom: none;
		}

		.table {
			width: 100%;
			padding-top: 1.7rem;
		}

		.table table {
			width: 100%;
			border: 1px solid #f8abb8;
		}

		.table table th,
		.table table td {
			text-align: center;
			background-color: #fff;
		}

		.table table th {
			background-color: #f4d3de;
		}

		.table table .day {
			width: 1.2rem;
			color: #fff;
			height: 0.8rem;
		}

		/* .table table th:nth-of-type(2n){
            background-color: #fff;
        }*/

		.table table td {
			/*width: 1.8rem;*/
			height: 1.08rem;
		}

		.table table td textarea {
			display: inline-block;
			/*width: 1.8rem;*/

			text-align: center;
			border: none;
			color: #000;
			font-size: 0.36rem;
			padding-top: 0.25rem;
			overflow: hidden;
		}

		.table table td textarea:focus {
			background-color: #fdce88;
			width: 100%;
			height: 101%;
			margin-bottom: -0.1rem;
			border-radius: 0%;
		}
		.table table th, .table table td:active{

		}
		.table table td textarea:blur {
			background-color: #fdce88;
			width: 100%;
			height: 100%;
			color: #000;
		}

		header em {
			background: rgba(0, 0, 0, 0);
			color: #fff;
			font-size: 0.24rem;
			width: 0.6rem;
		}
		.Dynamic ul del{
			width: 0.6rem;
			position: absolute;
			height: 0.88rem;
			left: 3%;
			top: 0%;
			background: url("../img/left.png") no-repeat center;
			-webkit-background-size: 100%;
			background-size: 100%;
		}
		.table table .date{
			width: 0.6rem;
			height: 0.4rem;
		}
	</style>
</head>

<body>
	<div class="timetable_layer" id="app">
		<!--头部-->
		<header class="Dynamic">
			<ul class="clearfix">
			<del onclick="location.href='./mine.html'"></del>
				<li class="timetable">
					<a href="javascript:;">
						<span>课程表</span>
					</a>
				</li>
				<li class="school">
					<a href="countDown.html">
						<span>高考倒计时</span>
					</a>
				</li>
				<em v-on:click="submit">完成</em>
			</ul>
		</header>
		<div class="table ">
			<table border="1">
				<tr>
					<th class="day date"> </th>
					<th class="day"> 星期一</th>
					<th class="day"> 星期二</th>
					<th class="day"> 星期三</th>
					<th class="day"> 星期四</th>
					<th class="day"> 星期五</th>
				</tr>
				<tr>
					<th class="date"> 1</th>
					<td class="day1">
						<!--每周的第一节课是：课是：课-->
						<textarea type="text" v-model="datas.day1_1" id="">{{obj[0]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_1" id="">{{obj[10]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_1" id="">{{obj[20]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_1" id="">{{obj[30]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_1" id="">{{obj[40]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date">2</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_2">{{obj[1]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_2">{{obj[11]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_2">{{obj[21]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_2">{{obj[31]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_2">{{obj[41]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 3</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_3">{{obj[2]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_3">{{obj[12]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_3">{{obj[22]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_3">{{obj[32]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_3">{{obj[42]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 4</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_4">{{obj[3]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_4">{{obj[13]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_4">{{obj[23]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_4">{{obj[33]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_4">{{obj[43]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 5</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_5">{{obj[4]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_5">{{obj[14]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_5">{{obj[24]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_5">{{obj[34]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_5">{{obj[44]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 6</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_6">{{obj[5]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_6">{{obj[15]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_6">{{obj[25]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_6">{{obj[35]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_6">{{obj[45]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 7</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_7">{{obj[6]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_7">{{obj[16]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_7">{{obj[26]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_7">{{obj[36]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_7">{{obj[46]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 8</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_8">{{obj[7]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_8">{{obj[17]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_8">{{obj[27]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_8">{{obj[37]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_8">{{obj[47]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 9</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_9">{{obj[8]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_9">{{obj[18]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_9">{{obj[28]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_9">{{obj[38]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_9">{{obj[48]}}</textarea>
					</td>
				</tr>
				<tr>
					<th class="date"> 10</th>
					<td class="day1">
						<textarea type="text" v-model="datas.day1_10">{{obj[9]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day2_10">{{obj[19]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day3_10">{{obj[29]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day4_10">{{obj[39]}}</textarea>
					</td>
					<td>
						<textarea type="text" v-model="datas.day5_10">{{obj[49]}}</textarea>
					</td>
				</tr>
			</table>
		</div>
	</div>

	<script>
		/*
		 * 双击编辑  课程表 点击完成后禁用textarea  */
		/* $("textarea").focus(function() {
		     $(this).parent().css("backgroundColor", "#fdce88");
		 });
		 $("textarea").blur(function() {
		     $(this).css("backgroundColor","#fdce88");
		     $(this).css("color","#fff");
		     $(this).parent().css("font-Size","0.36rem");
		     //获取用户输入的所有的内容
		     console.log($("textarea").val());
		 })
		 $(".day1 textarea").focus(function(){
		     $(this).parent().css("backgroundColor","#fdce88");
		     $(this).parent().prev().css("backgroundColor","#e27980");
		             /!*background-color: ;
		              color: #fff;
		              font-size: 0.36rem;*!/
		 });
		 $(" .day1 textarea").blur(function(){
		     $(this).css("backgroundColor","#fdce88");
		     $(this).css("color","#fff");
		     $(this).parent().css("font-Size","0.36rem");
		 });*/

		//获取用户输入的所有的内容
		//console.log($("textarea").val());
		console.log(Vue)
		var vm = new Vue({
			el: "#app",
			data: {
				userId: localStorage.getItem('userId'),
				obj:{},
				datas: {
					"day3_1": "",
					"day3_2": "",
					"day3_3": "",
					"day3_4": "",
					"day3_5": "",
					"day3_6": "",
					"day3_7": "",
					"day3_8": "",
					"day3_9": "",
					"day3_10": "",
					"day2_1": "",
					"day2_2": "",
					"day2_3": "",
					"day2_4": "",
					"day2_5": "",
					"day2_6": "",
					"day2_7": "",
					"day2_8": "",
					"day2_9": "",
					"day2_10": "",
					"day1_1": "",
					"day1_2": "",
					"day1_3": "",
					"day1_4": "",
					"day1_5": "",
					"day1_6": "",
					"day1_7": "",
					"day1_8": "",
					"day1_9": "",
					"day1_10": "",
					"day4_1": "",
					"day4_2": "",
					"day4_3": "",
					"day4_4": "",
					"day4_5": "",
					"day4_6": "",
					"day4_7": "",
					"day4_8": "",
					"day4_9": "",
					"day4_10": "",
					"day5_1": "",
					"day5_2": "",
					"day5_3": "",
					"day5_4": "",
					"day5_5": "",
					"day5_6": "",
					"day5_7": "",
					"day5_8": "",
					"day5_9": "",
					"day5_10": ""
				}
			},
			created: function () {
				//每次进来先发送 请求 判断有没有信息，有的话就是渲染
				this.render();
			},
			methods: {
				submit: function () {
					var str = this.datas.day1_1 + "," + this.datas.day1_2 + "," + this.datas.day1_3 + "," +
						this.datas.day1_4 + "," + this.datas.day1_5 + "," + this.datas.day1_6 + "," + this.datas
						.day1_7 + "," + this.datas.day1_8 + "," + this.datas.day1_9 + "," + this.datas.day1_10 +
						"," + this.datas.day2_1 + "," + this.datas.day2_2 + "," + this.datas.day2_3 + "," +
						this.datas.day2_4 + "," + this.datas.day2_5 + "," + this.datas.day2_6 + "," + this.datas
						.day2_7 + "," + this.datas.day2_8 + "," + this.datas.day2_9 + "," + this.datas.day2_10 +
						"," + this.datas.day3_1 + "," + this.datas.day3_2 + "," + this.datas.day3_3 + "," +
						this.datas.day3_4 + "," + this.datas.day3_5 + "," + this.datas.day3_6 + "," + this.datas
						.day3_7 + "," + this.datas.day3_8 + "," + this.datas.day3_9 + "," + this.datas.day3_10 +
						"," + this.datas.day4_1 + "," + this.datas.day4_2 + "," + this.datas.day4_3 + "," +
						this.datas.day4_4 + "," + this.datas.day4_5 + "," + this.datas.day4_6 + "," + this.datas
						.day4_7 + "," + this.datas.day4_8 + "," + this.datas.day4_9 + "," + this.datas.day4_10 +
						"," + this.datas.day5_1 + "," + this.datas.day5_2 + "," + this.datas.day5_3 + "," +
						this.datas.day5_4 + "," + this.datas.day5_5 + "," + this.datas.day5_6 + "," + this.datas
						.day5_7 + "," + this.datas.day5_8 + "," + this.datas.day5_9 + "," + this.datas.day5_10 +
						",";
					console.log(str);
					var url = "http://39.104.127.252:8080/beyond/api/coursebook/save";
					var postData = {
						content: str,
						userId: this.userId
					};
					var options = {
						emulateJSON: true
					};
					this.$http.post(url, postData, options).then(function (response) {
						if (response.body.code !== 0) {
							console.log(response.body.msg);
							return;
						} else {
							console.log(response.body);
						}
					})
				},
				render: function () {
					var api = "http://39.104.127.252:8080/beyond/api/coursebook/info";
					var option = {
						userId: this.userId
					};
					var options = {
						emulateJSON: true
					};
					this.$http.post(api, option, options).then(function (res) {
						if (res.body.code == 1) {
							alert("您还没有课程信息，请您添加");
							return;
						} else if (res.body.code == 0) {
							console.log(res.body);
							var content = res.body.content;
							// console.log(content);
							content = content.split(",");
							//console.log(content);
							var arr = ["day1_1", "day1_2", "day1_3", "day1_4", "day1_5", "day1_6",
								"day1_7", "day1_8", "day1_9", "day1_10", "day2_1", "day2_2",
								"day2_3", "day2_4", "day2_5", "day2_6", "day2_7", "day2_8",
								"day2_9", "day2_10", "day3_1", "day3_2", "day3_3", "day3_4",
								"day3_5", "day3_6", "day3_7", "day3_8", "day3_9", "day3_10",
								"day4_1", "day4_2", "day4_3", "day4_4", "day4_5", "day4_6",
								"day4_7", "day4_8", "day4_9", "day4_10"
							];
							var obj = {};
							for (var x in content) {
								obj[x] = content[x];
							}
							this.obj=obj
							console.log(obj);


							//渲染到页面上
						} else {
							console.log(res.body.msg);
							return;
						}
					})

				}
			},
		})
	</script>
</body>

</html>